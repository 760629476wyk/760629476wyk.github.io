(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{443:function(e,a,r){"use strict";r.r(a);var t=r(33),o=Object(t.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"kafka集群对接授权操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka集群对接授权操作"}},[e._v("#")]),e._v(" Kafka集群对接授权操作")]),e._v(" "),a("h2",{attrs:{id:"infomover与kafka交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#infomover与kafka交互"}},[e._v("#")]),e._v(" InfoMover与Kafka交互")]),e._v(" "),a("p",[e._v("涉及Kafka集群环节说明：")]),e._v(" "),a("p",[a("img",{attrs:{src:"b7ce64084c5f8f2b1acfadb8f83ea52b.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"kafka资源授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka资源授权"}},[e._v("#")]),e._v(" Kafka资源授权")]),e._v(" "),a("h3",{attrs:{id:"kafka-创建用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#kafka-创建用户"}},[e._v("#")]),e._v(" Kafka 创建用户")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("# 1. Kafka 创建用户 bin/kafka-configs.sh --zookeeper zookeeper-node:2181 --alter --add-config 'SCRAM-SHA-256=[password=password],SCRAM-SHA-512=[password=password]' --entity-type users --entity-name infomover")])])]),e._v(" "),a("tbody")]),e._v(" "),a("h3",{attrs:{id:"cluster资源授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cluster资源授权"}},[e._v("#")]),e._v(" cluster资源授权")]),e._v(" "),a("p",[e._v("授权原因：涉及查看cluster资源配置的操作，需分配cluster资源相关权限")]),e._v(" "),a("p",[e._v("涉及操作：")]),e._v(" "),a("p",[e._v("（1）Describe")]),e._v(" "),a("p",[e._v("（2）DescribeConfigs")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("# 2. 授权，资源类型cluster ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \\  --add --allow-principal User:infomover \\  --operation Describe --operation DescribeConfigs \\  --cluster")])])]),e._v(" "),a("tbody")]),e._v(" "),a("h3",{attrs:{id:"topic资源授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#topic资源授权"}},[e._v("#")]),e._v(" Topic资源授权")]),e._v(" "),a("p",[e._v("授权原因：涉及Topic创建、读写、配置查看、分区配置操作，删除操作涉及删除任务时删除任务相关的Topic、重新采集时通过DeleteRecords的API进行offset重置。")]),e._v(" "),a("p",[e._v("涉及操作：")]),e._v(" "),a("p",[e._v("（1）Create")]),e._v(" "),a("p",[e._v("（2）Read")]),e._v(" "),a("p",[e._v("（3）Write")]),e._v(" "),a("p",[e._v("（4）Describe")]),e._v(" "),a("p",[e._v("（5）DescribeConfigs")]),e._v(" "),a("p",[e._v("（6）Alter")]),e._v(" "),a("p",[e._v("（7）AlterConfigs")]),e._v(" "),a("p",[e._v("（8）Delete")]),e._v(" "),a("p",[e._v("Topic说明：")]),e._v(" "),a("p",[e._v("（1）任务执行使用配置类的Topic，以 im_connect 为前缀")]),e._v(" "),a("p",[e._v("im_connect_configs")]),e._v(" "),a("p",[e._v("im_connect_offsets")]),e._v(" "),a("p",[e._v("im_connect_status")]),e._v(" "),a("p",[e._v("（2）任务数据类Topic，以 im_ 为前缀")]),e._v(" "),a("p",[e._v("im_{任务ID}_history_schema # 样例：im_164753_history_schema")]),e._v(" "),a("p",[e._v("im_{任务ID}"),a("em",[e._v("internal_schema")]),e._v("{Connector配置ID} # 样例：im_164753_internal_schema_44")]),e._v(" "),a("p",[e._v("im_{任务ID}"),a("em",[e._v("{库名}")]),e._v("{表名} # 样例：im_164753_datayes_fst_detail")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("# 3. Topic操作 ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \\  --add --allow-principal User:infomover \\  --operation Create \\  --operation Read \\  --operation Write \\  --operation Describe --operation DescribeConfigs \\  --operation Alter --operation AlterConfigs \\ --operation Delete \\  --topic im_ --resource-pattern-type prefixed # 前缀匹配")])])]),e._v(" "),a("tbody")]),e._v(" "),a("h3",{attrs:{id:"group消费组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#group消费组"}},[e._v("#")]),e._v(" Group消费组")]),e._v(" "),a("p",[e._v("授权原因：涉及消费数据的环节包括任务运行信息处理、同步任务进行数据消费。")]),e._v(" "),a("p",[e._v("涉及操作：")]),e._v(" "),a("p",[e._v("（1）Describe")]),e._v(" "),a("p",[e._v("（2）Read")]),e._v(" "),a("p",[e._v("group.id（程序参数文件控制）:")]),e._v(" "),a("p",[e._v("（1）Mover使用： im_group_connect-cluster")]),e._v(" "),a("p",[e._v("（2）Consumer使用： im_group_consumer-connect")]),e._v(" "),a("p",[e._v("（3）主程序使用： im_group_consumer-infomover")]),e._v(" "),a("p",[e._v("（4）任务运行使用： im_group*")]),e._v(" "),a("p",[e._v("在消费时指定消费组，Consumer由Kafka自动分配。")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("# 4. Group消费组 ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \\  --add --allow-principal User:infomover \\  --operation Describe --operation Read \\  --group im_group --resource-pattern-type prefixed # 前缀匹配")])])]),e._v(" "),a("tbody")])])}),[],!1,null,null,null);a.default=o.exports}}]);