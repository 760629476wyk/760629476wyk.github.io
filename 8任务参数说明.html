<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>任务参数说明 | Infomover 帮助文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="Infomover功能说明以及使用过程中遇到的问题解答">
    
    <link rel="preload" href="/help/assets/css/0.styles.5932944c.css" as="style"><link rel="preload" href="/help/assets/js/app.0f366fef.js" as="script"><link rel="preload" href="/help/assets/js/2.4c34d73e.js" as="script"><link rel="preload" href="/help/assets/js/17.cc620383.js" as="script"><link rel="prefetch" href="/help/assets/js/10.aca0cb44.js"><link rel="prefetch" href="/help/assets/js/11.98c4167f.js"><link rel="prefetch" href="/help/assets/js/12.e7043ec7.js"><link rel="prefetch" href="/help/assets/js/13.c85e502e.js"><link rel="prefetch" href="/help/assets/js/14.da4cdf49.js"><link rel="prefetch" href="/help/assets/js/15.0caa3228.js"><link rel="prefetch" href="/help/assets/js/16.d5314189.js"><link rel="prefetch" href="/help/assets/js/18.4ec05b65.js"><link rel="prefetch" href="/help/assets/js/19.3af197bc.js"><link rel="prefetch" href="/help/assets/js/3.2802b4fd.js"><link rel="prefetch" href="/help/assets/js/4.8aeb52e3.js"><link rel="prefetch" href="/help/assets/js/5.27e6d2ad.js"><link rel="prefetch" href="/help/assets/js/6.ea710b26.js"><link rel="prefetch" href="/help/assets/js/7.c7e2bfaf.js"><link rel="prefetch" href="/help/assets/js/8.ad237d01.js"><link rel="prefetch" href="/help/assets/js/9.736391dc.js">
    <link rel="stylesheet" href="/help/assets/css/0.styles.5932944c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/help/" class="home-link router-link-active"><!----> <span class="site-name">Infomover 帮助文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>目录结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/help/1概述和登录页.html" class="sidebar-link">系统功能概述</a></li><li><a href="/help/2数据源—新建数据源.html" class="sidebar-link">数据源</a></li><li><a href="/help/3删除数据源.html" class="sidebar-link">删除数据源</a></li><li><a href="/help/4任务列表.html" class="sidebar-link">任务</a></li><li><a href="/help/5告警.html" class="sidebar-link">告警</a></li><li><a href="/help/6集群管理.html" class="sidebar-link">集群</a></li><li><a href="/help/7用户管理.html" class="sidebar-link">用户管理</a></li><li><a href="/help/8任务参数说明.html" class="active sidebar-link">任务参数说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/help/8任务参数说明.html#快照" class="sidebar-link">快照</a></li><li class="sidebar-sub-header"><a href="/help/8任务参数说明.html#数据类型转换" class="sidebar-link">数据类型转换</a></li></ul></li><li><a href="/help/9源端数据库对接说明.html" class="sidebar-link">源端数据库对接说明</a></li><li><a href="/help/10目标端数据库对接说明.html" class="sidebar-link">目标端数据库对接授权说明</a></li><li><a href="/help/11KAFKA授权对接说明.html" class="sidebar-link">Kafka集群对接授权操作</a></li><li><a href="/help/12问题解决方案.html" class="sidebar-link">问题解决方案</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="任务参数说明"><a href="#任务参数说明" class="header-anchor">#</a> 任务参数说明</h1> <h2 id="快照"><a href="#快照" class="header-anchor">#</a> 快照</h2> <h3 id="mysql快照"><a href="#mysql快照" class="header-anchor">#</a> MySQL快照</h3> <h4 id="mysql快照模式snapshot-mode"><a href="#mysql快照模式snapshot-mode" class="header-anchor">#</a> MySQL快照模式snapshot.mode</h4> <table><thead><tr><th><strong>SnapshotMode</strong></th> <th><strong>解释</strong></th></tr></thead> <tbody><tr><td>WHEN_NEEDED</td> <td>全量快照+增量数据+<strong>需要时</strong>重新执行快照</td></tr> <tr><td>INITIAL</td> <td>全量快照+增量数据</td></tr> <tr><td>INITIAL_ONLY</td> <td>全量快照</td></tr> <tr><td>SCHEMA_ONLY_RECOVERY</td> <td>表结构快照+增量数据+可恢复schema</td></tr> <tr><td>SCHEMA_ONLY</td> <td>表结构快照+增量数据</td></tr> <tr><td>NEVER</td> <td>增量数据</td></tr></tbody></table> <p>MySQL采集表进行快照的模式。</p> <ul><li>initial：全量快照+增量数据，仅在未记录逻辑服务器的偏移量时运行快照。</li> <li>initial_only：全量快照，仅在未记录逻辑服务器的偏移量时执行快照，不采集后续变更事件。</li> <li>when_needed：全量快照+增量数据+需要时重新执行快照，连接器判断需要时（没有可用的偏移量；偏移量指定了不可用的binlog位置或GTID），会在启动时运行快照。</li> <li>never：增量数据，不执行快照。从binlog开头进行读取。当binlog包含整个数据库的历史时数据才完整。</li> <li>schema_only：表结构快照+增量数据，表结构的快照，不包含数据。适用于不需要数据的一致性快照但需要连接器启动以来的变更事件的场景。</li> <li>schema_only_recovery：表结构快照+增量数据+可恢复schema，连接器采集中的恢复设置。重启连接器时，此设置启用对损坏或丢失的数据库历史主题的恢复。</li></ul> <h4 id="mysql快照锁定模式snapshot-locking-mode"><a href="#mysql快照锁定模式snapshot-locking-mode" class="header-anchor">#</a> MySQL快照锁定模式snapshot.locking.mode</h4> <table><thead><tr><th><strong>SnapshotLockingMode</strong></th> <th><strong>解释</strong></th></tr></thead> <tbody><tr><td>EXTENDED</td> <td>快照期间阻止所有写入操作。</td></tr> <tr><td>MINIMAL</td> <td>当连接器读取数据库schema和其他元数据时，仅在快照的<strong>初始</strong>阶段持有<strong>全局读取锁</strong>。快照的剩余工作包括从每个表中选择所有行，即使在全局读取锁释放以及其他MySQL客户端更新数据库时，使用<strong>可重复读</strong>事务以一致的方式完成。</td></tr> <tr><td>MINIMAL_PERCONA</td> <td>当连接器读取数据库schema和其他元数据时，仅在快照的<strong>初始</strong>阶段持有（<strong>Percona特有的</strong>）<strong>备份锁</strong>。此锁只阻止非事务表（如MyISAM）上的DDL和DML。快照的剩余工作包括从每个表中选择所有行，即使在全局读取锁释放以及其他MySQL客户端更新数据库时，使用<strong>可重复读</strong>事务以一致的方式完成。</td></tr> <tr><td>NONE</td> <td>快照过程中避免加表锁。 只能用在schema_only或schema_only_recovery的快照模式中，否则可能造成数据不一致。</td></tr></tbody></table> <h3 id="oracle快照"><a href="#oracle快照" class="header-anchor">#</a> Oracle快照</h3> <h4 id="oracle快照模式snapshot-mode"><a href="#oracle快照模式snapshot-mode" class="header-anchor">#</a> Oracle快照模式snapshot.mode</h4> <p>Oracle采集表进行快照的模式。</p> <ul><li>initial：快照包含表结构和数据。</li> <li>schema_only：快照仅包含表结构。</li></ul> <p><strong>快照完成后，连接器继续采集变更事件。</strong></p> <h4 id="oracle快照锁定模式snapshot-locking-mode"><a href="#oracle快照锁定模式snapshot-locking-mode" class="header-anchor">#</a> Oracle快照锁定模式snapshot.locking.mode</h4> <p>控制连接器是否持有表锁以及持有表锁的时间。表锁阻塞连接器执行快照过程期间执行的某种类型的表变更操作。</p> <ul><li>shared： 允许表的并发访问，但阻止任何会话获取独占表锁。连接器在采集表结构时获取ROW SHARE级别的锁。</li> <li>none：防止连接器在快照期间获取任何表锁。适用于在创建快照期间不会发生表结构变更的场景。</li></ul> <h3 id="postgresql快照"><a href="#postgresql快照" class="header-anchor">#</a> PostgreSQL快照</h3> <h4 id="postgresql快照模式snapshot-mode"><a href="#postgresql快照模式snapshot-mode" class="header-anchor">#</a> PostgreSQL快照模式snapshot.mode</h4> <p>PostgreSQL采集表进行快照的模式。</p> <ul><li>initial：仅在未记录逻辑服务器的偏移量时执行快照。</li> <li>always：连接器每次启动时都会执行快照。</li> <li>never ：不执行快照。从Kafka offsets topic中记录的LSN开始采集变更事件，如果LSN不存在，则从服务器上创建PostgreSQL逻辑复制插槽的时间点开始采集。</li> <li>initial_only：仅在未记录逻辑服务器的偏移量时执行快照，不采集后续变更事件（快照结束后停止任务）。</li> <li>exported：已弃用。</li> <li>custom：从参数snapshot.custom.class 获取自定义实现的接口。</li></ul> <h2 id="数据类型转换"><a href="#数据类型转换" class="header-anchor">#</a> 数据类型转换</h2> <h3 id="十进制字符转换"><a href="#十进制字符转换" class="header-anchor">#</a> 十进制字符转换</h3> <p>decimal.handling.mode</p> <table><thead><tr><th><strong>DecimalHandlingMode</strong></th> <th><strong>目标类型</strong></th> <th><strong>含义</strong></th></tr></thead> <tbody><tr><td>precise</td> <td>BYTES</td> <td>二进制精确转换 如：10.212 使用python进行转换 &quot;import base64; base64.b64encode('10.212'.encode())&quot;</td></tr> <tr><td>double</td> <td>FLOAT64</td> <td>科学计数方式（会存在精度丢失等问题）</td></tr> <tr><td>string</td> <td>STRING</td> <td>直接转为字符串 10.2120 -&gt; '10.2120'</td></tr></tbody></table> <h3 id="时间戳"><a href="#时间戳" class="header-anchor">#</a> 时间戳</h3> <p>time.precision.mode</p> <h3 id="二进制处理"><a href="#二进制处理" class="header-anchor">#</a> 二进制处理</h3> <p>binary.handling.mode</p> <h3 id="bigint无符号处理"><a href="#bigint无符号处理" class="header-anchor">#</a> BIGINT无符号处理</h3> <p>bigint.unsigned.handling.mode</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/help/7用户管理.html" class="prev">
        用户管理
      </a></span> <span class="next"><a href="/help/9源端数据库对接说明.html">
        源端数据库对接说明
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/help/assets/js/app.0f366fef.js" defer></script><script src="/help/assets/js/2.4c34d73e.js" defer></script><script src="/help/assets/js/17.cc620383.js" defer></script>
  </body>
</html>
