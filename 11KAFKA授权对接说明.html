<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Kafka集群对接授权操作 | Infomover 帮助文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="Infomover功能说明以及使用过程中遇到的问题解答">
    
    <link rel="preload" href="/help/assets/css/0.styles.5932944c.css" as="style"><link rel="preload" href="/help/assets/js/app.0f366fef.js" as="script"><link rel="preload" href="/help/assets/js/2.4c34d73e.js" as="script"><link rel="preload" href="/help/assets/js/8.ad237d01.js" as="script"><link rel="prefetch" href="/help/assets/js/10.aca0cb44.js"><link rel="prefetch" href="/help/assets/js/11.98c4167f.js"><link rel="prefetch" href="/help/assets/js/12.e7043ec7.js"><link rel="prefetch" href="/help/assets/js/13.c85e502e.js"><link rel="prefetch" href="/help/assets/js/14.da4cdf49.js"><link rel="prefetch" href="/help/assets/js/15.0caa3228.js"><link rel="prefetch" href="/help/assets/js/16.d5314189.js"><link rel="prefetch" href="/help/assets/js/17.cc620383.js"><link rel="prefetch" href="/help/assets/js/18.4ec05b65.js"><link rel="prefetch" href="/help/assets/js/19.3af197bc.js"><link rel="prefetch" href="/help/assets/js/3.2802b4fd.js"><link rel="prefetch" href="/help/assets/js/4.8aeb52e3.js"><link rel="prefetch" href="/help/assets/js/5.27e6d2ad.js"><link rel="prefetch" href="/help/assets/js/6.ea710b26.js"><link rel="prefetch" href="/help/assets/js/7.c7e2bfaf.js"><link rel="prefetch" href="/help/assets/js/9.736391dc.js">
    <link rel="stylesheet" href="/help/assets/css/0.styles.5932944c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/help/" class="home-link router-link-active"><!----> <span class="site-name">Infomover 帮助文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>目录结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/help/1概述和登录页.html" class="sidebar-link">系统功能概述</a></li><li><a href="/help/2数据源—新建数据源.html" class="sidebar-link">数据源</a></li><li><a href="/help/3删除数据源.html" class="sidebar-link">删除数据源</a></li><li><a href="/help/4任务列表.html" class="sidebar-link">任务</a></li><li><a href="/help/5告警.html" class="sidebar-link">告警</a></li><li><a href="/help/6集群管理.html" class="sidebar-link">集群</a></li><li><a href="/help/7用户管理.html" class="sidebar-link">用户管理</a></li><li><a href="/help/8任务参数说明.html" class="sidebar-link">任务参数说明</a></li><li><a href="/help/9源端数据库对接说明.html" class="sidebar-link">源端数据库对接说明</a></li><li><a href="/help/10目标端数据库对接说明.html" class="sidebar-link">目标端数据库对接授权说明</a></li><li><a href="/help/11KAFKA授权对接说明.html" class="active sidebar-link">Kafka集群对接授权操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/help/11KAFKA授权对接说明.html#infomover与kafka交互" class="sidebar-link">InfoMover与Kafka交互</a></li><li class="sidebar-sub-header"><a href="/help/11KAFKA授权对接说明.html#kafka资源授权" class="sidebar-link">Kafka资源授权</a></li></ul></li><li><a href="/help/12问题解决方案.html" class="sidebar-link">问题解决方案</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="kafka集群对接授权操作"><a href="#kafka集群对接授权操作" class="header-anchor">#</a> Kafka集群对接授权操作</h1> <h2 id="infomover与kafka交互"><a href="#infomover与kafka交互" class="header-anchor">#</a> InfoMover与Kafka交互</h2> <p>涉及Kafka集群环节说明：</p> <p><img src="b7ce64084c5f8f2b1acfadb8f83ea52b.png" alt=""></p> <h2 id="kafka资源授权"><a href="#kafka资源授权" class="header-anchor">#</a> Kafka资源授权</h2> <h3 id="kafka-创建用户"><a href="#kafka-创建用户" class="header-anchor">#</a> Kafka 创建用户</h3> <table><thead><tr><th># 1. Kafka 创建用户 bin/kafka-configs.sh --zookeeper zookeeper-node:2181 --alter --add-config 'SCRAM-SHA-256=[password=password],SCRAM-SHA-512=[password=password]' --entity-type users --entity-name infomover</th></tr></thead> <tbody></tbody></table> <h3 id="cluster资源授权"><a href="#cluster资源授权" class="header-anchor">#</a> cluster资源授权</h3> <p>授权原因：涉及查看cluster资源配置的操作，需分配cluster资源相关权限</p> <p>涉及操作：</p> <p>（1）Describe</p> <p>（2）DescribeConfigs</p> <table><thead><tr><th># 2. 授权，资源类型cluster ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \  --add --allow-principal User:infomover \  --operation Describe --operation DescribeConfigs \  --cluster</th></tr></thead> <tbody></tbody></table> <h3 id="topic资源授权"><a href="#topic资源授权" class="header-anchor">#</a> Topic资源授权</h3> <p>授权原因：涉及Topic创建、读写、配置查看、分区配置操作，删除操作涉及删除任务时删除任务相关的Topic、重新采集时通过DeleteRecords的API进行offset重置。</p> <p>涉及操作：</p> <p>（1）Create</p> <p>（2）Read</p> <p>（3）Write</p> <p>（4）Describe</p> <p>（5）DescribeConfigs</p> <p>（6）Alter</p> <p>（7）AlterConfigs</p> <p>（8）Delete</p> <p>Topic说明：</p> <p>（1）任务执行使用配置类的Topic，以 im_connect 为前缀</p> <p>im_connect_configs</p> <p>im_connect_offsets</p> <p>im_connect_status</p> <p>（2）任务数据类Topic，以 im_ 为前缀</p> <p>im_{任务ID}_history_schema # 样例：im_164753_history_schema</p> <p>im_{任务ID}<em>internal_schema</em>{Connector配置ID} # 样例：im_164753_internal_schema_44</p> <p>im_{任务ID}<em>{库名}</em>{表名} # 样例：im_164753_datayes_fst_detail</p> <table><thead><tr><th># 3. Topic操作 ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \  --add --allow-principal User:infomover \  --operation Create \  --operation Read \  --operation Write \  --operation Describe --operation DescribeConfigs \  --operation Alter --operation AlterConfigs \ --operation Delete \  --topic im_ --resource-pattern-type prefixed # 前缀匹配</th></tr></thead> <tbody></tbody></table> <h3 id="group消费组"><a href="#group消费组" class="header-anchor">#</a> Group消费组</h3> <p>授权原因：涉及消费数据的环节包括任务运行信息处理、同步任务进行数据消费。</p> <p>涉及操作：</p> <p>（1）Describe</p> <p>（2）Read</p> <p>group.id（程序参数文件控制）:</p> <p>（1）Mover使用： im_group_connect-cluster</p> <p>（2）Consumer使用： im_group_consumer-connect</p> <p>（3）主程序使用： im_group_consumer-infomover</p> <p>（4）任务运行使用： im_group*</p> <p>在消费时指定消费组，Consumer由Kafka自动分配。</p> <table><thead><tr><th># 4. Group消费组 ### 参考命令 bin/kafka-acls.sh --authorizer-properties zookeeper.connect=zookeeper-node:2181 \  --add --allow-principal User:infomover \  --operation Describe --operation Read \  --group im_group --resource-pattern-type prefixed # 前缀匹配</th></tr></thead> <tbody></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/help/10目标端数据库对接说明.html" class="prev">
        目标端数据库对接授权说明
      </a></span> <span class="next"><a href="/help/12问题解决方案.html">
        问题解决方案
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/help/assets/js/app.0f366fef.js" defer></script><script src="/help/assets/js/2.4c34d73e.js" defer></script><script src="/help/assets/js/8.ad237d01.js" defer></script>
  </body>
</html>
