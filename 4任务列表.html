<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>任务 | Infomover 帮助文档</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    <meta name="description" content="Infomover功能说明以及使用过程中遇到的问题解答">
    
    <link rel="preload" href="/help/assets/css/0.styles.5932944c.css" as="style"><link rel="preload" href="/help/assets/js/app.0f366fef.js" as="script"><link rel="preload" href="/help/assets/js/2.4c34d73e.js" as="script"><link rel="preload" href="/help/assets/js/13.c85e502e.js" as="script"><link rel="prefetch" href="/help/assets/js/10.aca0cb44.js"><link rel="prefetch" href="/help/assets/js/11.98c4167f.js"><link rel="prefetch" href="/help/assets/js/12.e7043ec7.js"><link rel="prefetch" href="/help/assets/js/14.da4cdf49.js"><link rel="prefetch" href="/help/assets/js/15.0caa3228.js"><link rel="prefetch" href="/help/assets/js/16.d5314189.js"><link rel="prefetch" href="/help/assets/js/17.cc620383.js"><link rel="prefetch" href="/help/assets/js/18.4ec05b65.js"><link rel="prefetch" href="/help/assets/js/19.3af197bc.js"><link rel="prefetch" href="/help/assets/js/3.2802b4fd.js"><link rel="prefetch" href="/help/assets/js/4.8aeb52e3.js"><link rel="prefetch" href="/help/assets/js/5.27e6d2ad.js"><link rel="prefetch" href="/help/assets/js/6.ea710b26.js"><link rel="prefetch" href="/help/assets/js/7.c7e2bfaf.js"><link rel="prefetch" href="/help/assets/js/8.ad237d01.js"><link rel="prefetch" href="/help/assets/js/9.736391dc.js">
    <link rel="stylesheet" href="/help/assets/css/0.styles.5932944c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/help/" class="home-link router-link-active"><!----> <span class="site-name">Infomover 帮助文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>目录结构</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/help/1概述和登录页.html" class="sidebar-link">系统功能概述</a></li><li><a href="/help/2数据源—新建数据源.html" class="sidebar-link">数据源</a></li><li><a href="/help/3删除数据源.html" class="sidebar-link">删除数据源</a></li><li><a href="/help/4任务列表.html" class="active sidebar-link">任务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/help/4任务列表.html#任务列表" class="sidebar-link">任务列表</a></li></ul></li><li><a href="/help/5告警.html" class="sidebar-link">告警</a></li><li><a href="/help/6集群管理.html" class="sidebar-link">集群</a></li><li><a href="/help/7用户管理.html" class="sidebar-link">用户管理</a></li><li><a href="/help/8任务参数说明.html" class="sidebar-link">任务参数说明</a></li><li><a href="/help/9源端数据库对接说明.html" class="sidebar-link">源端数据库对接说明</a></li><li><a href="/help/10目标端数据库对接说明.html" class="sidebar-link">目标端数据库对接授权说明</a></li><li><a href="/help/11KAFKA授权对接说明.html" class="sidebar-link">Kafka集群对接授权操作</a></li><li><a href="/help/12问题解决方案.html" class="sidebar-link">问题解决方案</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="任务"><a href="#任务" class="header-anchor">#</a> 任务</h1> <h2 id="任务列表"><a href="#任务列表" class="header-anchor">#</a> 任务列表</h2> <p>流式采集和数据库同步的区别：流式采集的目的端只能是Kafka，可以理解为目的端是Kafka的同步任务。</p> <ul><li>任务查询：可根据“关键字”、“类型”、“状态”、“源端”、“目标端”、“责任人”组合进行任务查询，“重置”可清除筛选条件；</li> <li>添加任务：新增任务，可选“流式采集”、“数据库同步”；</li> <li>删除任务：删除已有任务及相应的实例；</li> <li>任务操作：进行任务“发布”、“暂停”、“恢复”、“重启”、“断点恢复”、“重新采集”等运维操作。</li></ul> <h3 id="添加任务"><a href="#添加任务" class="header-anchor">#</a> 添加任务</h3> <p>点击“添加”按钮进行任务添加，填写“任务名称”，选择任务“类型”，选择“数据源类别”、“输出目标类别”：</p> <p><img src="f3746faeeb0c68d1f38589a1323bd361.png" alt=""></p> <h4 id="流式采集"><a href="#流式采集" class="header-anchor">#</a> 流式采集</h4> <h5 id="任务配置"><a href="#任务配置" class="header-anchor">#</a> 任务配置</h5> <ul><li>功能描述: 配置任务名称、类型及数据源与输出目标类别。</li> <li>操作步骤：
<ol><li>配置任务名称：demo-collect-Oracle</li> <li>选择任务类型为“流式采集”;</li> <li>选择数据源类别，可选Oracle/MySQL/postgres；</li> <li>选择输出目标类别为“默认kafka”（默认kafka：内部Kafka集群，数据Topic使用Connector运行的Kafka集群；数据源中定义的kafka：数据源中配置的Kafka集群，当前Kafka不是Connector运行使用的Kafka集群时只存数据Topic）。</li></ol></li></ul> <p><img src="6e1a42749ad263276cca4a86da09dcc4.png" alt=""></p> <p>点击“确认”默认进入任务配置页面，任务配置默认生成“源端信息”、“目标端信息”、“集群信息”节点：</p> <p><img src="51a61cda669cd5667658152c97588a31.png" alt=""></p> <h5 id="源端属性配置"><a href="#源端属性配置" class="header-anchor">#</a> 源端属性配置</h5> <h6 id="oracle源端属性配置"><a href="#oracle源端属性配置" class="header-anchor">#</a> Oracle源端属性配置</h6> <p>双击“源端信息”节点或点击“源端属性配置”进入源端信息配置：</p> <p><img src="c5d19808e03d6ad68f0c5cf5bccabc4a.png" alt=""></p> <p>属性配置</p> <ul><li>功能描述: 配置数据源属性。</li></ul> <p><img src="ac7017abdff509bb136ea9f3dbe25a86.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>Decimal精度控制模式</td> <td></td> <td></td> <td></td></tr> <tr><td>Schema生成（值）</td> <td>生成数据是否包含Schema信息，默认false。</td> <td>是</td> <td>True:包含Schema的数据 False:发送Debezium的json格式数据</td></tr> <tr><td>值转换器</td> <td>值转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>键转换器</td> <td>键转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（键）</td> <td>默认false</td> <td>是</td> <td></td></tr> <tr><td>副本数量</td> <td>topic的副本数量，默认值为1.</td> <td></td> <td></td></tr> <tr><td>分区数</td> <td>topic的分区数，默认值为1.</td> <td></td> <td></td></tr> <tr><td>删除策略</td> <td>topic的消息删除策略，默认值为delete.</td> <td></td> <td>delete：根据数据已保存的时间，进行删除； compact：根据messages中的key，进行删除操作（保留最新的记录）。</td></tr> <tr><td>压缩方式</td> <td>topic的压缩方式，默认值为zstd.</td> <td></td> <td>uncompressed：不压缩 zstd/lz4/snappy/gzip：压缩类型 producer：保留生产者设置的原始压缩编解码</td></tr> <tr><td>保留时间</td> <td>topic数据保留时间，默认值为-1.</td> <td></td> <td>-1表示永久保留。</td></tr> <tr><td>保留大小</td> <td>topic数据保留大小，默认值为10737418240（10GB）。</td> <td></td> <td></td></tr> <tr><td>时间精度模式</td> <td>时间，日期和时间戳可以用不同类型的精度表示。默认值为connect。</td> <td></td> <td>adaptive_time_microseconds（默认值）根据数据库列的类型，使用毫秒、微秒或纳秒精度值，准确地捕获数据库中的日期、日期时间和时间戳值，但TIME类型字段除外，TIME类型字段始终捕获为微秒。 adaptive（已弃用）根据数据库列的类型，使用毫秒、微秒或纳秒精度值，准确捕获数据库中的时间和时间戳值。 connect始终使用Kafka connect对时间、日期和时间戳的内置表示来表示时间和时间戳值，无论数据库列的精度如何，都使用毫秒精度。</td></tr></tbody></table> <p>过滤</p> <ul><li>功能描述: 配置采集的库表。</li> <li>操作步骤：
<ol><li>选择“数据库”，列出库中可用的表；
<ol><li>勾选一个或多个库表，点击“+”添加到“已选”。</li></ol></li></ol></li></ul> <p><img src="01bc2b301307c82cb4f82fa207b790a9.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择“调用模型”。</li></ol></li></ul> <p><img src="ce9522c8b3a6333588bb6735cf1825aa.png" alt=""></p> <p>数据选项</p> <ul><li>功能描述: 配置数据采集参数。</li></ul> <p><img src="99054f71503e6dd02e68e3329597f777.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据采集模式</td> <td>在连接器启动时运行快照的模式。 默认模式：全量采集+增量采集。</td> <td>是</td> <td>选项包括： initial：全量采集+增量采集（默认）; schema_only：采集表结构+增量数据采集</td></tr> <tr><td>快照锁模式</td> <td>控制连接器在执行架构快照时如何在表上保持锁定。默认值为“加锁保护”。</td> <td>是</td> <td>控制连接器是否持有表锁以及持有表锁的时间。表锁阻塞连接器执行快照过程期间执行的某种类型的表变更操作。 shared：加锁保护 - 默认设置 （注释：使用行级锁，防止快照过程操作期间表结构更改的场景，支持并发访问）） none：不加锁保护（只适用于采集过程中表结构不被变更的场景）</td></tr> <tr><td>快照模式包括数据收集</td> <td>必须设置此设置以指定要在创建或重新启动连接器时必须采集的表/集合列表。</td> <td></td> <td></td></tr> <tr><td>快照期间批量读取表行数</td> <td>在执行快照时应加载到内存中的最大记录数</td> <td></td> <td></td></tr> <tr><td>快照延迟（毫秒）</td> <td>在毫秒中首先开始快照之前的延迟时间。默认为0 ms。</td> <td></td> <td></td></tr> <tr><td>快照锁定超时（MS）</td> <td>在快照开头时要等待表锁的最大数量。如果在此时间框架中无法获取锁，则将中止快照。默认为10000。</td> <td></td> <td></td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>应覆盖快照期间使用的默认选择语句的表列表</td> <td>此属性包含逗号分隔的完全限定表（db_name.table_name）或（schema_name.table_name），具体取决于表示的连接器。</td> <td></td> <td>选择各个表的语句是由ID'snapshot.select.statement. overrides.[db_name].[TABLE_NAME]'或'snapshot.select.statement.overrides.[schema_name].[table_name]'分别。这些属性的值是在快照期间从特定表中检索数据时要使用的SELECT语句。仅用于大附加表的可能使用情况正在设置一个特定点，在其中开始（恢复）快照，以防先前的快照被中断。</td></tr> <tr><td>删除操作是否产生墓碑事件</td> <td>删除操作是否应由删除事件和子查询到事件（true）表示或仅由删除事件（false）表示。默认为false.</td> <td></td> <td>默认值：采集任务为false，同步任务为true。</td></tr> <tr><td>转换器配置</td> <td>可选的自定义转换器列表，而不是默认的转换器。</td> <td></td> <td>转换器使用“&lt;converter.prefix&gt; .type”配置选项定义，并使用选项'&lt;converter.prefix&gt;.&lt;option&gt;'配置。</td></tr> <tr><td>截断列到n个字符</td> <td>将符合应截断的列的完全限定列名称的逗号分隔的正则表达式列表。</td> <td></td> <td></td></tr> <tr><td>掩码列与n个星号</td> <td>逗号分隔的正则表达式列表，匹配应以配置的星号（'*'）字符的已配置量屏蔽的完全限定列的全文名称。</td> <td></td> <td></td></tr> <tr><td>哈希模型</td> <td>逗号分隔的正则表达式列表，匹配应通过散列输入屏蔽的完全限定列的全文名称。使用指定的哈希算法和盐。</td> <td></td> <td></td></tr> <tr><td>通过数据类型传播源类型</td> <td>逗号分隔的正则表达式列表，与特定于数据库的数据类型名称匹配，该名称将数据类型的原始类型和原始长度添加为发射的更改记录中的相应字段模式。</td> <td></td> <td></td></tr> <tr><td>按列传播源类型</td> <td>逗号分隔的正则表达式列表匹配完全限定的列名称，该列将列的原始类型和原始长度添加为发射的更改记录中的相应字段模式。</td> <td></td> <td></td></tr> <tr><td>消息分区键</td> <td>分号分隔的表达式列表，匹配完全限定的表和列用作消息键。</td> <td></td> <td>每个表达式必须匹配模式'&lt;完全限定表名称&gt;:&lt;key列&gt;'，其中表名称可以定义为（db_name.table_name）或（schema_name.table_name），具体取决于特定的连接器和密钥列是表示自定义密钥的逗号分隔列列表。对于没有显式密钥配置的任何表，表的主键列将用作消息键.Example： dbserver1.inventory.orderlines:orderId,orderLineId;dbserver1.inventory.orders:id</td></tr> <tr><td>将事务元数据信息存储在专用主题中</td> <td>使事务元数据提取与事件计数一起。默认为false。</td> <td></td> <td></td></tr> <tr><td>是否清洗</td> <td>字段名称是否会对Avro命名约定清洗。默认为false。</td> <td></td> <td></td></tr></tbody></table> <p>运行时选项</p> <ul><li>功能描述: 配置任务运行参数。</li></ul> <p><img src="c206e6031bbd787ac86d7fad8db2052e.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>连接器心跳间隔（毫秒）</td> <td>间隔的长度在毫秒内，其中连接器周期性地将心跳消息发送到心跳主题。使用0禁用心跳消息。默认情况下禁用。</td> <td></td> <td></td></tr> <tr><td>心跳命名前缀</td> <td>用于将心跳主题命名的前缀 topics.Defaults 到 __debezium-heartbeat。</td> <td></td> <td></td></tr> <tr><td>源结构制造商版本</td> <td>消息中公开可见源部件格式的版本。默认为v2。</td> <td></td> <td></td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>跳过操作</td> <td>在流期间跳过逗号分隔的操作列表，定义为：'c'，用于插入/创建;'u'更新;'d'删除。默认情况下，不会跳过任何操作。</td> <td></td> <td></td></tr> <tr><td>事件反序列化故障处理</td> <td>指定应处理事件期间的故障（即遇到损坏的事件时），默认值fail。</td> <td></td> <td>'fail'（默认值）表示有问题事件的异常，并提出其位置，导致连接器停止; “warn”问题事件及其立场将被记录，并且将跳过事件; 'ignore'将跳过问题事件。</td></tr> <tr><td>更改事件缓冲区大小</td> <td>更改事件的最大大小从数据库日志读取但尚未录制或转发。默认值为8192，应始终大于最大批次大小。</td> <td></td> <td></td></tr> <tr><td>轮询间隔（MS）</td> <td>在没有以毫秒为单位的情况下接收到没有事件后，要查看新更改事件的时间。默认为500毫秒。</td> <td></td> <td></td></tr></tbody></table> <p>（待完善）Logminer参数</p> <ul><li>功能描述: 配置任务运行参数。</li></ul> <p><img src="8c636ef70f68cce01023f2de0e7d7342.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>日志采矿策略</td> <td></td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td></tr></tbody></table> <h6 id="mysql源端属性配置"><a href="#mysql源端属性配置" class="header-anchor">#</a> MySQL源端属性配置</h6> <p>任务配置默认生成“源端信息”、“目标端信息”、“集群信息”节点：</p> <p><img src="d4f9de17dc7044269cdf9803f44cd4b3.png" alt=""></p> <p>双击“源端信息”节点或点击“源端属性配置”进入源端信息配置：</p> <p><img src="60a22c44271841d71783e6e0a88436c0.png" alt=""></p> <p>属性配置</p> <p><img src="a5bd6c0076350e47a2b9b27885cd7fae.png" alt=""></p> <ul><li>功能描述: 配置数据源属性。</li> <li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td>命名标识</td> <td>唯一名称标识数据库服务器和所有记录的偏移，并且用作所有模式和主题的前缀。默认使用任务名称。</td> <td>是</td> <td>每个不同的安装都应具有单独的命名空间，并在最多的一个debezium连接器上监控。</td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>Decimal精度控制模式</td> <td>DECIMAL和NUMERIC类型字段的处理方式。当前默认值为string。</td> <td></td> <td>precise：在变更事件中数值以java.math.BigDecimal表示并保存为二进制形式。 double：数值表示为double形式，可能导致精度丢失。 string：数值格式化编码为字符串，消费时精度保存但类型信息丢失。</td></tr> <tr><td>Schema生成（值）</td> <td>默认false</td> <td></td> <td>value.converter.schemas.enable</td></tr> <tr><td>群集ID偏移量</td> <td>此偏移量用于从基本配置的群集ID生成这些ID。默认10000。</td> <td>是</td> <td>只有相关的如果配置了并行快照。在并行快照期间，向数据库客户端打开多个连接，每个连接都需要自己的唯一连接ID。</td></tr> <tr><td>连接超时（MS）</td> <td>在尝试在定时之前尝试连接到数据库之后的最长时间，以毫秒为单位。默认为30,000（30秒）。</td> <td></td> <td></td></tr> <tr><td>保持连接活动（真/假）</td> <td>是否应使用单独的线程来确保连接保持活力。默认为True。</td> <td></td> <td></td></tr> <tr><td>保持活动间隔（MS）</td> <td>连接检查是否使用保持存在线程的时间间隔，以毫秒为单位，默认为60,000（1分钟）。</td> <td></td> <td></td></tr> <tr><td>Statement初始化</td> <td>建立与数据库的JDBC连接（不是Binlog读取连接）时要执行的分号分隔列表。</td> <td>否</td> <td>请注意，连接器可以以自己的自行决定建立JDBC连接，因此这通常仅用于配置会话参数，但不用于执行DML语句。使用双分号（';;'）使用分号作为字符而不是分隔符。</td></tr> <tr><td>值转换器</td> <td>值转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>键转换器</td> <td>键转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（键）</td> <td>生成数据是否包含Schema信息，默认包含（true）。</td> <td>是</td> <td>True:包含Schema的数据 False:发送普通的json格式数据</td></tr> <tr><td>副本数量</td> <td>topic的副本数量，默认值为1.</td> <td></td> <td></td></tr> <tr><td>分区数</td> <td>topic的分区数，默认值为1.</td> <td></td> <td></td></tr> <tr><td>删除策略</td> <td>topic的消息删除策略，默认值为delete.</td> <td></td> <td></td></tr> <tr><td>压缩方式</td> <td>topic的压缩方式，默认值为producer.</td> <td></td> <td></td></tr> <tr><td>保留时间</td> <td>topic的消息保留时间，默认值为-1.</td> <td></td> <td>-1表示永久保留。</td></tr> <tr><td>时间戳</td> <td>时间、日期和时间戳的精度表示。默认值为connect。</td> <td></td> <td>adaptive_time_microseconds（默认值）根据数据库列的类型，使用毫秒、微秒或纳秒精度值，准确地捕获数据库中的日期、日期时间和时间戳值，但TIME类型字段除外，TIME类型字段始终捕获为微秒。 adaptive（已弃用）根据数据库列的类型，使用毫秒、微秒或纳秒精度值，准确捕获数据库中的时间和时间戳值。 connect始终使用Kafka connect对时间、日期和时间戳的内置表示来表示时间和时间戳值，无论数据库列的精度如何，都使用毫秒精度。</td></tr></tbody></table> <p>过滤</p> <ul><li>功能描述: 配置采集的库表。</li> <li>操作步骤：</li> <li>选择“数据库”，列出库中可用的表；</li> <li>勾选一个或多个库表，点击“+”添加到“已选”。</li></ul> <p><img src="2379dae9e7a833eb071a9c1b31eb87c5.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择“调用模型”。</li></ol></li></ul> <p><img src="728675eb5344bd3e17804d3e3a409a2a.png" alt=""></p> <p>数据选项</p> <ul><li>功能描述: 配置数据采集参数。</li></ul> <p><img src="bd9bbf9fc5af4f64b1738b2cad45b1ff.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>快照模式</td> <td>在连接器启动时运行快照的模式。</td> <td>是</td> <td>采集表进行快照的模式。 initial（默认值）：全量快照+增量数据，仅在未记录逻辑服务器的偏移量时运行快照。 initial_only：全量快照，仅在未记录逻辑服务器的偏移量时执行快照，不采集后续变更事件。 when_needed：全量快照+增量数据+需要时重新执行快照，连接器判断需要时（没有可用的偏移量；偏移量指定了不可用的binlog位置或GTID），会在启动时运行快照。 never：增量数据，不执行快照。从binlog开头进行读取。当binlog包含整个数据库的历史时数据才完整。 schema_only：表结构快照+增量数据，表结构的快照，不包含数据。适用于不需要数据的一致性快照但需要连接器启动以来的变更事件的场景。 schema_only_recovery：表结构快照+增量数据+可恢复schema，连接器采集中的恢复设置。重启连接器时，此设置启用对损坏或丢失的数据库历史主题的恢复。</td></tr> <tr><td>全局读锁长度</td> <td>快照锁定模式，控制连接器在执行快照时连接到全局读锁的长度。默认值为“minimal”。</td> <td></td> <td>默认值为“minimal”。 extended：快照期间阻止所有写入操作。 minimal：当连接器读取数据库schema和其他元数据时，仅在快照的初始阶段持有全局读取锁。快照的剩余工作包括从每个表中选择所有行，即使在全局读取锁释放以及其他MySQL客户端更新数据库时，使用可重复读事务以一致的方式完成。 minimal_percona：当连接器读取数据库schema和其他元数据时，仅在快照的初始阶段持有（Percona特有的）备份锁。此锁只阻止非事务表（如MyISAM）上的DDL和DML。快照的剩余工作包括从每个表中选择所有行，即使在全局读取锁释放以及其他MySQL客户端更新数据库时，使用可重复读事务以一致的方式完成。 none：快照过程中避免加表锁。只能用在schema_only或schema_only_recovery的快照模式中，否则可能造成数据不一致。</td></tr> <tr><td>自动添加任何新表</td> <td>测试版功能：在连接器重新启动时，连接器将检查是否已添加任何新表，并将其快照。目前只有两个选项，默认为off。</td> <td></td> <td>'off'：默认行为。不要快照新表。'parallel': 当快照完成时，独立的Binlog Reader将开始读取新表的事件，直到它捕获到现在的时间。此时，旧的和新的Binlog Reader暂时停止，新的Binlog Reader将开始读取所有已配置表的Binlog。并行Binlog Reader将配置配置的服务器ID为10000+主Binlog Reader的服务器ID。</td></tr> <tr><td>快照延迟（毫秒）</td> <td>在毫秒中首先开始快照之前的延迟时间。默认为0。</td> <td></td> <td>连接器在执行快照之前等待的时间间隔（以毫秒为单位）。如果要在集群中启动多个连接器，此属性有助于避免快照中断。默认为0毫秒</td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>快照获取行数/批</td> <td>在执行快照时应加载到内存中的最大记录数。</td> <td></td> <td>从表中单次获取记录的最大行数。快照以批量的形式读取表。</td></tr> <tr><td>应覆盖快照期间使用的默认选择语句的表列表</td> <td>此属性包含逗号分隔的完全限定表（db_name.table_name）或（schema_name.table_name），具体取决于表示的连接器。</td> <td></td> <td>选择各个表的语句是由ID'snapshot.select.statement. overrides.[db_name].[TABLE_NAME]'或'snapshot.select.statement.overrides.[schema_name].[table_name]'分别。这些属性的值是在快照期间从特定表中检索数据时要使用的SELECT语句。仅用于大附加表的可能使用情况正在设置一个特定点，在其中开始（恢复）快照，以防先前的快照被中断。</td></tr> <tr><td>事件反序列化故障处理</td> <td>binlog事件反序列化异常的响应模式。默认值fail。</td> <td></td> <td>fail：抛出异常，该异常提示问题事件及其binlog偏移量，异常会造成连接器停止。 warn：记录问题事件及其binlog偏移量，并跳过该事件。ignore：跳过问题事件，不记录任何内容。</td></tr> <tr><td>启用时间调整器</td> <td>False表示完全由数据库决定。MySQL允许用户插入2位数或4位数的年份值。两位数的值映射的年份范围是1970-2069。默认行为是连接器进行转换（true）。</td> <td></td> <td></td></tr> <tr><td>过滤DML事件</td> <td>如果设置为true，我们将仅生成DML事件，以便在MySQL服务器上写入的事务，其中包含UUIDs与由gtid.source.includes或gtid.source.excludes配置选项匹配的UUIDs，如果指定了配置选项。默认为true。</td> <td></td> <td></td></tr> <tr><td>包括GTID源</td> <td>在确定MySQL Server的Binlog中的起始位置时，源UUID用于包括GTID范围。</td> <td></td> <td></td></tr> <tr><td>排除GTID源</td> <td>在确定MySQL Server的Binlog中的起始位置时，源UUID用于排除GTID范围。</td> <td></td> <td></td></tr> <tr><td>删除操作是否产生墓碑事件</td> <td>删除操作是否应由删除事件和子查询到事件（true）表示或仅由删除事件（false）表示。默认为false.</td> <td></td> <td>发出公告事件允许Kafka完全删除源记录删除后删除与给定键相关的所有事件。</td></tr> <tr><td>时间戳</td> <td>时间，日期和时间戳可以用不同类型的精度表示，包括：&quot;adaptive&quot;,&quot;adaptive_time_microseconds&quot;,&quot;connect&quot;。默认为connect.</td> <td></td> <td>'adaptive_time_microseconds'：日期和时间戳值的精度是基于数据库列的精度;但是时间字段总是使用微秒精度; 'connect'：始终表示使用Kafka Connect的内置表示的时间，日期和时间戳的时间，日期和时间戳值，无论数据库列的精度如何，它使用毫秒精度。</td></tr> <tr><td>二进制处理</td> <td>指定如何在更改事件中表示二进制（BLOB，二进制等）列，默认为bytes。</td> <td></td> <td>'bytes'表示二进制数据转为字节数组（默认）; 'base64'表示二进制数据转为base64编码的字符串; 'hex'表示二进制数据转为十六进制编码（Base16）字符串</td></tr> <tr><td>BIGINT无符号处理</td> <td>指定在更改事件中应表示Bigint无符号列，默认为long。</td> <td></td> <td>'precise'使用java.math.bigdecimal表示使用二进制表示和Kafka Connect的'org.apache.kafka.connect.data.Decimal'类型; 'long'（默认值）表示使用Java的“LONG”的值，这可能无法提供精度，但在消费者中使用的更容易。</td></tr> <tr><td>是否输出数据库架构更改</td> <td>连接器是否应将数据库架构的更改发布到Kafka主题，以与数据库服务器ID相同的名称。每个模式更改都将使用包含数据库名称的键进行录制，并且其值包括新架构的逻辑描述和可选的DDL语句。默认值为“true”。这与连接器内部如何记录数据库历史记录。</td> <td></td> <td></td></tr> <tr><td>在更改事件中包含原始SQL查询</td> <td>连接器是否应包括生成更改事件的原始SQL查询。默认值为false。</td> <td></td> <td>注意：此选项需要使用Binlog_Rows_Query_Log_Events选项配置MySQL。从快照生成的事件不会出现查询。警告：启用此选项可能会通过在更改事件中包含原始SQL语句，公开表明或屏蔽的表或字段。因此，默认值为“false”。</td></tr> <tr><td>数据库历史级别</td> <td>应该用于存储和恢复数据库架构更改的数据库History类的名称。历史记录的配置属性是以'database.history.'为前缀。</td> <td></td> <td>默认值：io.debezium.relational.history.KafkaDatabaseHistory</td></tr> <tr><td>流式结果集大小</td> <td>表的行数必须包含流程结果，而不是在快照期间将全部拉入内存。默认为1,000。</td> <td></td> <td>使用0表示流式处理所有结果，并完全避免检查每个表的大小。</td></tr> <tr><td>Binlog Reader缓冲区大小</td> <td>Binlog Reader使用的展望缓冲区的大小来决定正在进行的事务是否会被提交或回滚。使用0来禁用远程缓冲。默认为0（即禁用缓冲）。</td> <td></td> <td></td></tr> <tr><td>截断列到n个字符</td> <td>将符合应截断的列的完全限定列名称的逗号分隔的正则表达式列表。</td> <td></td> <td></td></tr> <tr><td>掩码列与n个星号</td> <td>逗号分隔的正则表达式列表，匹配应以配置的星号（'*'）字符的已配置量屏蔽的完全限定列的全文名称。</td> <td></td> <td></td></tr> <tr><td>哈希模型</td> <td>逗号分隔的正则表达式列表，匹配应通过散列输入屏蔽的完全限定列的全文名称。使用指定的哈希算法和盐。</td> <td></td> <td></td></tr> <tr><td>消息分区键</td> <td>分号分隔的表达式列表，匹配完全限定的表和列用作消息键。</td> <td></td> <td>每个表达式必须匹配模式'&lt;完全限定表名称&gt;:&lt;key列&gt;'，其中表名称可以定义为（db_name.table_name）或（schema_name.table_name），具体取决于特定的连接器和密钥列是表示自定义密钥的逗号分隔列列表。对于没有显式密钥配置的任何表，表的主键列将用作消息键.Example： dbserver1.inventory.orderlines:orderId,orderLineId;dbserver1.inventory.orders:id</td></tr></tbody></table> <p>运行时选项</p> <ul><li>功能描述: 配置任务运行参数。</li></ul> <p><img src="98d13a625655acbe70fdedb4feeb312d.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>连接器心跳间隔（毫秒）</td> <td>间隔的长度在毫秒内，其中连接器周期性地将心跳消息发送到心跳主题。使用0禁用心跳消息。默认情况下禁用。</td> <td></td> <td></td></tr> <tr><td>心跳命名前缀</td> <td>用于将心跳命名的前缀topics.Defaults到__debezium-heartbeat。</td> <td></td> <td></td></tr> <tr><td>Connector异常恢复失败前最大尝试读取历史数据的次数</td> <td>在Connector异常恢复失败前可尝试读取持久化历史数据的最大次数。无数据接收的最长等待时间是recovery.attempts x recovery.poll.interval.ms，默认为100.</td> <td></td> <td></td></tr> <tr><td>源结构制造商版本</td> <td>消息中公开可见源部件格式的版本。默认值为v2。</td> <td></td> <td></td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>恢复期间轮询间隔（ms)</td> <td>在恢复期间调用持久数据的轮询时等待毫秒的数量。默认为100.</td> <td></td> <td></td></tr> <tr><td>跳过操作</td> <td>在流期间跳过逗号分隔的操作列表，定义为：'c'，用于插入/创建;'u'更新;'d'删除。默认情况下，不会跳过任何操作。</td> <td></td> <td></td></tr> <tr><td>事件反序列化故障处理</td> <td>指定应处理事件期间的故障（即遇到损坏的事件时），默认值为fail</td> <td></td> <td>'fail'（默认值）表示有问题事件的异常，并提出其位置，导致连接器停止; 'warn'问题事件及其立场将被记录，并且将跳过事件; 'ignore'将跳过问题事件。</td></tr> <tr><td>不一致的架构故障处理</td> <td>指定应处理属于从内部模式表示（即内部表示的表中的表所缺少的Binlog事件（即，与数据库不一致） 。默认值为fail.</td> <td></td> <td>'fail'（默认值）表示有问题的事件及其Binlog位置的异常，导致连接器停止; “warn”问题事件及其Binlog位置将被记录，并且将跳过事件; “ignore”问题事件将跳过。</td></tr> <tr><td>事件批量大小</td> <td>每批源记录读取的最大大小。默认为2048。</td> <td></td> <td></td></tr> <tr><td>事件缓冲区大小</td> <td>更改事件的最大大小从数据库日志读取但尚未录制或转发。默认值为8192，应始终大于最大批次大小。</td> <td></td> <td></td></tr> <tr><td>轮询间隔（MS）</td> <td>在没有以毫秒为单位的情况下接收到没有事件后，要查看新更改事件的时间。默认为500毫秒。</td> <td></td> <td></td></tr></tbody></table> <h6 id="postgresql源端属性配置"><a href="#postgresql源端属性配置" class="header-anchor">#</a> PostgreSQL源端属性配置</h6> <p>任务配置默认生成“源端信息”、“目标端信息”、“集群信息”节点：</p> <p><img src="df9f11e72aa0c9d2f9d1df354a0446e3.png" alt=""></p> <p>双击“源端信息”节点或点击“源端属性配置”进入源端信息配置：</p> <p><img src="d254a81e725a87aa139d35f9319fb5b9.png" alt=""></p> <p>属性配置</p> <ul><li>功能描述: 配置数据源属性。</li></ul> <p><img src="a17177c0a6ad4534558b36de95e766f5.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td>名称标识</td> <td>唯一名称标识数据库服务器和所有记录的偏移，并且用作所有模式和主题的前缀。默认使用任务名称，可修改。</td> <td>是</td> <td>每个不同的安装都应具有单独的命名空间，并在最多的一个debezium连接器上监控。</td></tr> <tr><td><strong>高级选项</strong></td> <td></td> <td></td> <td></td></tr> <tr><td>值转换器</td> <td>值转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>键转换器</td> <td>键转换器，默认为org.apache.kafka.connect.json.JsonConverter</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（值）</td> <td>生成数据是否包含Schema信息，默认包含（true）。</td> <td>是</td> <td>True:包含Schema的数据 False:发送普通的json格式数据</td></tr> <tr><td>Schema生成（值）</td> <td>默认true</td> <td>是</td> <td>value.converter.schemas.enable</td></tr></tbody></table> <p>过滤</p> <ul><li>功能描述: 配置采集的库表。</li> <li>操作步骤：
<ol><li>选择“数据库”，列出库中可用的表；</li> <li>勾选一个或多个库表，点击“+”添加到“已选”。</li></ol></li></ul> <p><img src="a3750ce3d25f57e518a5857201fbe19b.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择“调用模型”。</li></ol></li></ul> <p><img src="d067558d1a4f1ff35ace04f60d90fb5b.png" alt=""></p> <p>数据选项</p> <ul><li>功能描述: 配置数据采集参数。</li></ul> <p><img src="12f8a10bf0e035394016607cde276b80.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>快照模式</td> <td>在连接器启动时运行快照的模式。</td> <td>是</td> <td>默认为：initial。 initial：仅在未记录逻辑服务器的偏移量时执行快照。 always：连接器每次启动时都会执行快照。 never ：不执行快照。从Kafka offsets topic中记录的LSN开始采集变更事件，如果LSN不存在，则从服务器上创建PostgreSQL逻辑复制插槽的时间点开始采集。 initial_only：仅在未记录逻辑服务器的偏移量时执行快照，不采集后续变更事件（快照结束后停止任务）。 exported：已弃用。 custom：从参数snapshot.custom.class 获取自定义实现的接口。</td></tr> <tr><td>快照获取大小</td> <td>在执行快照时应加载到内存中的最大记录数</td> <td></td> <td></td></tr> <tr><td>快照延迟（毫秒）</td> <td>在毫秒中首先开始快照之前的延迟时间。默认为0 ms。</td> <td></td> <td></td></tr> <tr><td>快照锁定超时（MS）</td> <td>在快照开头时要等待表锁的最大数量。如果在此时间框架中无法获取锁，则将中止快照。默认为10000。</td> <td></td> <td></td></tr> <tr><td>应覆盖快照期间使用的默认选择语句的表列表</td> <td>此属性包含逗号分隔的完全限定表（db_name.table_name）或（schema_name.table_name），具体取决于表示的连接器。</td> <td></td> <td>选择各个表的语句是由ID'snapshot.select.statement. overrides.[db_name].[TABLE_NAME]'或'snapshot.select.statement.overrides.[schema_name].[table_name]'分别。这些属性的值是在快照期间从特定表中检索数据时要使用的SELECT语句。仅用于大附加表的可能使用情况正在设置一个特定点，在其中开始（恢复）快照，以防先前的快照被中断。</td></tr> <tr><td>删除操作是否产生墓碑事件</td> <td>删除操作是否应由删除事件和子查询到事件（true）表示或仅由删除事件（false）表示。默认为false.</td> <td></td> <td>发出公告事件允许Kafka完全删除源记录删除后删除与给定键相关的所有事件。</td></tr> <tr><td>十进制处理</td> <td>指定十进制和数字列应该如何在更改事件中表示。</td> <td></td> <td>precise'（默认值）使用java.math.bigdecimal来表示使用二进制表示和Kafka Connect's'org.apache在更改事件中编码的值.kafka.connect.data.decimal'类型; “string”使用字符串表示值; “double”代表了使用Java的“double”的价值，这可能无法提供精确度，但在消费者中使用的更容易。</td></tr> <tr><td>时间精确</td> <td>时间，日期和时间戳可以用不同类型的精度表示，包括：&quot;adaptive&quot;,&quot;adaptive_time_microseconds&quot;,&quot;connect&quot;</td> <td></td> <td>'adaptive_time_microseconds'：日期和时间戳值的精度是基于数据库列的精度;但是时间字段总是使用微秒精度; 'connect'：始终表示使用Kafka Connect的内置表示的时间，日期和时间戳的时间，日期和时间戳值，无论数据库列的精度如何，它使用毫秒精度。</td></tr> <tr><td>定义自定义值转换器的前缀列表</td> <td>可选的自定义转换器列表，而不是默认的转换器。</td> <td></td> <td>转换器使用“&lt;converter.prefix&gt; .type”配置选项定义，并使用选项'&lt;converter.prefix&gt;.&lt;option&gt;'配置。</td></tr> <tr><td>截断列到n个字符</td> <td>将符合应截断的列的完全限定列名称的逗号分隔的正则表达式列表。</td> <td></td> <td></td></tr> <tr><td>掩码列与n个星号</td> <td>逗号分隔的正则表达式列表，匹配应以配置的星号（'*'）字符的已配置量屏蔽的完全限定列的全文名称。</td> <td></td> <td></td></tr> <tr><td>使用哈希和盐的屏蔽</td> <td>逗号分隔的正则表达式列表，匹配应通过散列输入屏蔽的完全限定列的全文名称。使用指定的哈希算法和盐。</td> <td></td> <td></td></tr> <tr><td>通过数据类型传播源类型</td> <td>逗号分隔的正则表达式列表，与特定于数据库的数据类型名称匹配，该名称将数据类型的原始类型和原始长度添加为发射的更改记录中的相应字段模式。</td> <td></td> <td></td></tr> <tr><td>按列传播源类型</td> <td>逗号分隔的正则表达式列表匹配完全限定的列名称，该列将列的原始类型和原始长度添加为发射的更改记录中的相应字段模式。</td> <td></td> <td></td></tr> <tr><td>列PK映射</td> <td>分号分隔的表达式列表，匹配完全限定的表和列用作消息键。</td> <td></td> <td>每个表达式必须匹配模式'&lt;完全限定表名称&gt;:&lt;key列&gt;'，其中表名称可以定义为（db_name.table_name）或（schema_name.table_name），具体取决于特定的连接器和密钥列是表示自定义密钥的逗号分隔列列表。对于没有显式密钥配置的任何表，表的主键列将用作消息键.Example： dbserver1.inventory.orderlines:orderId,orderLineId;dbserver1.inventory.orders:id</td></tr> <tr><td>将事务元数据信息存储在专用主题中</td> <td>使事务元数据提取与事件计数一起</td> <td></td> <td></td></tr> <tr><td>清理，将遵守Avro命名约定的字段名称</td> <td>字段名称是否会对Avro命名约定清洗</td> <td></td> <td></td></tr></tbody></table> <p>运行时选项</p> <ul><li>功能描述: 配置任务运行参数。</li></ul> <p><img src="f144e5cd20dd490d13add4e6d37aacdc.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>连接器心跳间隔（毫秒）</td> <td>间隔的长度在毫秒内，其中连接器周期性地将心跳消息发送到心跳主题。使用0禁用心跳消息。默认情况下禁用。</td> <td></td> <td></td></tr> <tr><td>用于命名心跳主题的前缀</td> <td>用于将心跳命名的前缀topics.Defaults到__debezium-heartbeat。</td> <td></td> <td></td></tr> <tr><td>跳过操作</td> <td>在流期间跳过逗号分隔的操作列表，定义为：'c'，用于插入/创建;'u'更新;'d'删除。默认情况下，不会跳过任何操作。</td> <td></td> <td></td></tr> <tr><td>事件反序列化故障处理</td> <td>指定应处理事件期间的故障（即遇到损坏的事件时）</td> <td></td> <td>'fail'（默认值）表示有问题事件的异常，并提出其位置，导致连接器停止; 'warn'问题事件及其立场将被记录，并且将跳过事件; 'ignore'将跳过问题事件。</td></tr> <tr><td>更改事件缓冲区大小</td> <td>更改事件的最大大小从数据库日志读取但尚未录制或转发。默认值为8192，应始终大于最大批次大小。</td> <td></td> <td></td></tr> <tr><td>轮询间隔（MS）</td> <td>在没有以毫秒为单位的情况下接收到没有事件后，要查看新更改事件的时间。默认为500毫秒。</td> <td></td> <td></td></tr> <tr><td>源结构制造商版本</td> <td>消息中公开可见源部件格式的版本</td> <td></td> <td></td></tr></tbody></table> <h5 id="目标端属性配置"><a href="#目标端属性配置" class="header-anchor">#</a> 目标端属性配置</h5> <h6 id="internal-kafka"><a href="#internal-kafka" class="header-anchor">#</a> internal_kafka</h6> <p>双击“目标端信息”节点或点击“目标端属性”进入输出目标配置：</p> <p><img src="fd66d93d401e2af9cfbfa20b506bd3fe.png" alt=""></p> <p>Kafka</p> <ul><li>功能描述: 配置存放数据的Kafka。</li> <li>操作步骤：
<ol><li>选择已配置的“集群”;</li> <li>“Connector节点”、“bootStrap节点”信息自动带出。</li></ol></li></ul> <p><img src="44aeb8abc67cb72dccb72762224285bf.png" alt=""></p> <p>输入输出表对应关系</p> <ul><li>功能描述: 配置数据表与Kafka Topic的映射关系。</li> <li>操作步骤：
<ol><li>勾选“备选”中的表；</li> <li>点击“+”添加至输出Topic（Topic名称自动生成）。</li></ol></li></ul> <p><img src="b2582b7e8445b4adc3eacda7e010a6e0.png" alt=""></p> <h6 id="external-kafka"><a href="#external-kafka" class="header-anchor">#</a> external_kafka</h6> <p>双击“目标端信息”节点或点击“目标端属性”进入输出目标配置：</p> <p><img src="6835140075829f080c2323eae441fa7f.png" alt=""></p> <p>Kafka</p> <ul><li>功能描述: 配置存放数据的Kafka。</li> <li>操作步骤：
<ol><li>选择已配置Kafka类型的“数据源”链接;</li> <li>“bootstrap地址”信息自动带出。</li></ol></li></ul> <p><img src="ebaf4e10723de4caa5503d1746b7ba4c.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>Kafka集群链接信息，数据源页面配置。</td> <td>是</td> <td></td></tr> <tr><td>bootstrap地址</td> <td>Kafka集群地址信息，默认是Kafka数据源链接信息获取。</td> <td>是</td> <td>不可在此处修改</td></tr> <tr><td>sink topic 分区数</td> <td>默认值为1。</td> <td>是</td> <td></td></tr> <tr><td>sink topic 副本数</td> <td>默认值为1。</td> <td>是</td> <td></td></tr> <tr><td>消息最大字节限制</td> <td>默认值为2000000。</td> <td>是</td> <td></td></tr> <tr><td>topic清理策略</td> <td>默认值为delete。</td> <td>是</td> <td>delete compact</td></tr> <tr><td>压缩方式</td> <td>默认值为producer。</td> <td>是</td> <td>producer uncompressed gzip snappy</td></tr> <tr><td>日志保留时间</td> <td>默认值为-1。</td> <td>是</td> <td></td></tr> <tr><td>批量个数</td> <td>默认值为1。</td> <td>是</td> <td></td></tr> <tr><td>key serializer</td> <td>默认值为org.apache.kafka.common.serialization.StringSerializer。</td> <td>是</td> <td></td></tr> <tr><td>value serializer</td> <td>默认值为org.apache.kafka.common.serialization.StringSerializer。</td> <td>是</td> <td></td></tr> <tr><td>value schemas show</td> <td>默认值为false。</td> <td>是</td> <td></td></tr> <tr><td>value converter</td> <td>默认值为org.apache.kafka.connect.storage.StringConverter。</td> <td>是</td> <td></td></tr> <tr><td>高级选项</td> <td></td> <td></td> <td></td></tr> <tr><td>key converter</td> <td>默认值为org.apache.kafka.connect.storage.StringConverter。</td> <td>是</td> <td></td></tr> <tr><td>key schemas show</td> <td>默认值为false。</td> <td>是</td> <td></td></tr></tbody></table> <p>输入输出表对应关系</p> <ul><li>功能描述: 配置数据表与Kafka Topic的映射关系。</li> <li>操作步骤：
<ol><li>勾选“备选”中的表；</li> <li>点击“+”添加至输出Topic（Topic名称默认自动生成，可修改）。</li></ol></li></ul> <p><img src="469df05a83b0dd4b8d1c209b9afd654e.png" alt=""></p> <h5 id="集群配置信息"><a href="#集群配置信息" class="header-anchor">#</a> 集群配置信息</h5> <p>双击“集群信息”节点或点击“集群配置信息”进入输出目标配置：</p> <p><img src="663f76d6d1bffb6cfa64a23771b2034a.png" alt=""></p> <ul><li>功能描述: 配置任务运行的使用的Connector集群。</li> <li>操作步骤：
<ol><li>选择“集群”链接；</li> <li>“Connector节点”、“bootStrap节点”信息自动带出。</li></ol></li></ul> <p><img src="6b6f32fe36d71fb6579d5485dd732c7f.png" alt=""></p> <h4 id="同步任务"><a href="#同步任务" class="header-anchor">#</a> 同步任务</h4> <h5 id="任务配置-2"><a href="#任务配置-2" class="header-anchor">#</a> 任务配置</h5> <ul><li>功能描述: 配置任务名称、类型及数据源与输出目标类别。</li> <li>操作步骤：
<ol><li>配置任务名称：demo-sync；</li> <li>选择任务类型为“同步任务”；</li> <li>选择数据源类别，可选Oracle/MySQL/postgres；</li> <li>选择输出目标类别，可选Oracle/MySQL/postgres。</li></ol></li></ul> <p><img src="f112380a6a5b2cd68da0035a97fb526a.png" alt=""></p> <p>点击“确认”默认进入任务配置页面：</p> <p><img src="04fc8b24bbec21cd01147baef02380c3.png" alt=""></p> <h5 id="源端属性配置-2"><a href="#源端属性配置-2" class="header-anchor">#</a> 源端属性配置</h5> <p>源端属性配置参考流式采集的源端属性配置。</p> <h5 id="目标端属性配置-2"><a href="#目标端属性配置-2" class="header-anchor">#</a> 目标端属性配置</h5> <h6 id="oracle目标端属性配置"><a href="#oracle目标端属性配置" class="header-anchor">#</a> Oracle目标端属性配置</h6> <p>双击“目标端信息”节点或点击“目标端属性”进入输出目标配置：</p> <p><img src="9f8210a31db4eb2081d85167e33e2f5e.png" alt=""></p> <p>属性配置</p> <ul><li>功能描述: 配置数据源属性。</li></ul> <p><img src="830b11e2b0380bfbc447a3307990d61c.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td>批量插入条数</td> <td>批量插入条数,默认3000。</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（值）</td> <td>Schema生成(值)，默认true。</td> <td>是</td> <td></td></tr> <tr><td>是否自动添加列</td> <td>当发现相对于记录模式丢失时，是否通过发出自动在表模式中添加列，默认true。</td> <td></td> <td></td></tr> <tr><td>最大连接最大次数</td> <td>尝试获取有效 JDBC 连接的最大次数，默认3.</td> <td></td> <td></td></tr> <tr><td>连接重试间隔</td> <td>连接尝试之间的间隔时间，默认10000。</td> <td></td> <td></td></tr> <tr><td>最大重试次数</td> <td>最大重试次数，默认10.</td> <td></td> <td></td></tr> <tr><td>错误后重试前等待的时间</td> <td>错误后重试前等待的时间，默认3000.</td> <td></td> <td></td></tr> <tr><td>白名单过滤条件</td> <td>逗号分隔的记录值字段名称列表。 如果为空，则使用记录值中的所有字段，否则用于过滤到所需字段。</td> <td></td> <td></td></tr> <tr><td>数据库时区</td> <td>时间的值的 JDBC 时区。</td> <td></td> <td></td></tr></tbody></table> <p>输入输出表对应关系</p> <ul><li>功能描述: 配置数据表映射关系及表主键信息。</li> <li>操作步骤：
<ol><li>勾选“备选”中的表；</li> <li>点击“+”添加至输出表，填写“输出表”、“主键”。</li></ol></li></ul> <p><img src="6077c71fa9133aa54d09d03d6a58f739.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择“调用模型”。</li></ol></li></ul> <p><img src="af15df95a687ffe1b5eace4043c8b294.png" alt=""></p> <h6 id="mysql目标端属性配置"><a href="#mysql目标端属性配置" class="header-anchor">#</a> MySQL目标端属性配置</h6> <p>双击“目标端信息”节点或点击“目标端属性”进入输出目标配置：</p> <p>属性配置</p> <ul><li>功能描述: 配置数据源属性。</li></ul> <p><img src="9b12ace2b51d9efba03979f2bcfd8e01.png" alt=""></p> <p><img src="b090c0ab91c649b6a614a78d07a3649f.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td>批量插入条数</td> <td>批量插入条数,默认3000。</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（值）</td> <td>Schema生成(值)，默认true。</td> <td>是</td> <td></td></tr> <tr><td>是否自动创建目标表</td> <td>是否根据记录模式自动创建目标表，默认true。</td> <td></td> <td></td></tr> <tr><td>是否自动添加列</td> <td>当发现相对于记录模式丢失时，是否通过发出自动在表模式中添加列，默认true。</td> <td></td> <td></td></tr> <tr><td>最大连接最大次数</td> <td>尝试获取有效 JDBC 连接的最大次数，默认3.</td> <td></td> <td></td></tr> <tr><td>连接重试间隔</td> <td>连接尝试之间的间隔时间，默认10000。</td> <td></td> <td></td></tr> <tr><td>最大重试次数</td> <td>最大重试次数，默认10.</td> <td></td> <td></td></tr> <tr><td>错误后重试前等待的时间</td> <td>错误后重试前等待的时间，默认3000.</td> <td></td> <td></td></tr> <tr><td>白名单过滤条件</td> <td>逗号分隔的记录值字段名称列表。 如果为空，则使用记录值中的所有字段，否则用于过滤到所需字段。</td> <td></td> <td></td></tr> <tr><td>数据库时区</td> <td>时间的值的 JDBC 时区。</td> <td></td> <td></td></tr></tbody></table> <p>输入输出表对应关系</p> <ul><li>功能描述: 配置数据表映射关系及表主键信息。</li> <li>操作步骤：
<ol><li>勾选“备选”中的表；</li> <li>点击“+”添加至输出表，填写“输出表”、“主键”。</li></ol></li></ul> <p><img src="c62c3c39067f30952c0b390a2894eb97.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择路由类型。</li></ol></li></ul> <p><img src="10607bb2493772358909976c063759e0.png" alt=""></p> <h6 id="postgresql目标端属性配置"><a href="#postgresql目标端属性配置" class="header-anchor">#</a> PostgreSQL目标端属性配置</h6> <p>双击“目标端信息”节点或点击“目标端属性”进入输出目标配置：</p> <p>属性配置</p> <ul><li>功能描述: 配置数据源属性。</li></ul> <p><img src="1e7c049ee75d687874ba31a1068a40ee.png" alt=""></p> <p><img src="83316f4fd662006a6127f535f940c8fe.png" alt=""></p> <ul><li>参数列表</li></ul> <table><thead><tr><th><strong>参数名称</strong></th> <th><strong>参数含义</strong></th> <th><strong>必填</strong></th> <th><strong>特殊说明</strong></th></tr></thead> <tbody><tr><td>数据源</td> <td>数据库链接。</td> <td>是</td> <td>选择“数据源”配置的数据库链接</td></tr> <tr><td>批量插入条数</td> <td>批量插入条数,默认3000。</td> <td>是</td> <td></td></tr> <tr><td>Schema生成（值）</td> <td>Schema生成(值)，默认true。</td> <td>是</td> <td></td></tr> <tr><td>是否自动创建目标表</td> <td>是否根据记录模式自动创建目标表，默认true。</td> <td></td> <td></td></tr> <tr><td>是否自动添加列</td> <td>当发现相对于记录模式丢失时，是否通过发出自动在表模式中添加列，默认true。</td> <td></td> <td></td></tr> <tr><td>最大连接最大次数</td> <td>尝试获取有效 JDBC 连接的最大次数，默认3.</td> <td></td> <td></td></tr> <tr><td>连接重试间隔</td> <td>连接尝试之间的间隔时间，默认10000。</td> <td></td> <td></td></tr> <tr><td>最大重试次数</td> <td>最大重试次数，默认10.</td> <td></td> <td></td></tr> <tr><td>错误后重试前等待的时间</td> <td>错误后重试前等待的时间，默认3000.</td> <td></td> <td></td></tr> <tr><td>白名单过滤条件</td> <td>逗号分隔的记录值字段名称列表。 如果为空，则使用记录值中的所有字段，否则用于过滤到所需字段。</td> <td></td> <td></td></tr> <tr><td>数据库时区</td> <td>时间的值的 JDBC 时区。</td> <td></td> <td></td></tr></tbody></table> <p>输入输出表对应关系</p> <ul><li>功能描述: 配置数据表映射关系及表主键信息。</li> <li>操作步骤：
<ol><li>勾选“备选”中的表；</li> <li>点击“+”添加至输出表，填写“输出表”、“<strong>主键</strong>”。</li></ol></li></ul> <p><img src="c62c3c39067f30952c0b390a2894eb97.png" alt=""></p> <p>转换</p> <ul><li>功能描述: 配置数据转换路由规则。</li> <li>操作步骤：
<ol><li>填写“名称”；</li> <li>选择路由类型。</li></ol></li></ul> <p><img src="10607bb2493772358909976c063759e0.png" alt=""></p> <h5 id="集群配置信息-2"><a href="#集群配置信息-2" class="header-anchor">#</a> 集群配置信息</h5> <p>参考采集任务<a href="#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">集群配置信息</a>。</p> <h3 id="任务操作"><a href="#任务操作" class="header-anchor">#</a> 任务操作</h3> <h4 id="任务保存"><a href="#任务保存" class="header-anchor">#</a> 任务保存</h4> <ul><li>功能描述：保存任务配置。</li></ul> <p>点击“完成并保存”按钮保存任务：</p> <p><img src="f1091d21d57ad183d83fee32e378813f.png" alt=""></p> <h4 id="任务发布"><a href="#任务发布" class="header-anchor">#</a> 任务发布</h4> <ul><li>功能描述：发布任务到集群执行。</li></ul> <p>在“任务列表”页面操作项点击“发布”按钮，“确认”发布即可将任务发布至任务配置的集群。</p> <p><img src="a95fc190c3571d36fbc3a3db01b0b0d6.png" alt=""></p> <p>页面提示发布成功后，可进行任务“暂停”或“重启”操作：</p> <p><img src="fce9631c7b2cd190197951b12f62972c.png" alt=""></p> <h4 id="任务刷新"><a href="#任务刷新" class="header-anchor">#</a> 任务刷新</h4> <ul><li>功能描述：指修改配置后，让任务重新加载最新配置到connector中。</li></ul> <p>适用于处在“暂停”、“已发布”状态的任务，在“任务列表”页面操作项点击“刷新”按钮，在弹出提示框点击“确认”即可刷新任务配置并启动任务。</p> <p><img src="c967169dc65e94018f763811aed73f55.png" alt=""></p> <h4 id="任务暂停"><a href="#任务暂停" class="header-anchor">#</a> 任务暂停</h4> <ul><li>功能描述：暂停任务执行。</li></ul> <p>适用场景：降低Connector节点、源端数据库、目标端负载压力。</p> <p>在任务配置页面或“任务列表”页面点击“暂停”按钮，在弹出提示框点击“确认”即可暂停任务。</p> <p><img src="81799e34f106631dc53f36643d220f9c.png" alt=""></p> <p>暂停后的任务状态为“暂停”，可对任务进行“恢复”、“重启”。</p> <h4 id="任务恢复"><a href="#任务恢复" class="header-anchor">#</a> 任务恢复</h4> <ul><li>功能描述：将“暂停”状态的任务恢复执行。</li></ul> <p>适用于处在“暂停”状态的任务，在任务配置页面或“任务列表”页面点击“恢复”按钮，在弹出提示框点击“确认”即可恢复任务运行。</p> <p><img src="1d462dbdf39acab9f47133af4ada63cf.png" alt=""></p> <p>页面提示“操作成功”，任务状态转为“已发布”。</p> <p><img src="b421e4e34c5eb8ab419888fdc62caab4.png" alt=""></p> <h4 id="任务重启"><a href="#任务重启" class="header-anchor">#</a> 任务重启</h4> <ul><li>功能描述：重启任务。</li></ul> <p>适用场景：当任务发生错误，人为修复后，再将任务重新启动。</p> <p>适用于处在“暂停”、“已发布”状态的任务，在任务配置页面或“任务列表”页面点击“重启”，在弹出提示框点击“确认”即可重启任务。</p> <p><img src="aecbd0bab69edf6c5b4fdf44f7b5724c.png" alt=""></p> <h4 id="断点恢复"><a href="#断点恢复" class="header-anchor">#</a> 断点恢复</h4> <ul><li>功能描述：恢复因history_schema与采集表不一致而报错停止的任务。</li></ul> <p>适用场景：只针对whose schema isn’t known to this connector报错的恢复。</p> <p>适用于告警状态为“有”的任务且任务报错信息为“whose schema isn’t known to this connector”，在 “任务列表”页面点击“断点恢复”，在弹出提示框点击“确认”即可进行任务恢复。</p> <p><img src="57ea8cbec275b9c7a3943b900abfe41c.png" alt=""></p> <h4 id="重新采集"><a href="#重新采集" class="header-anchor">#</a> 重新采集</h4> <ul><li>功能描述：重新采集数据，重建Connector采集任务，且已产生的目标端对象（表、topic）名称不变。</li></ul> <p>适用场景：任务因失败、数据不一致等问题需要重新采集数据时，下游要求目标端表、topic等保持名称一致；任务新增采集表。</p> <p>适用于“运行中”、“暂停”等状态的任务，在“任务列表”页面点击“重新采集”/“重采成功”/“重采失败”，在弹出提示框点击“确认”即可进行任务重新采集。</p> <p><img src="59374b1bc36cc8b5b10d8b5026081009.png" alt=""></p> <h4 id="任务监控"><a href="#任务监控" class="header-anchor">#</a> 任务监控</h4> <ul><li>功能描述：监控任务运行状态。</li></ul> <p><img src="6ec7a81be9c5382789aeda363e54b051.png" alt=""></p> <p>点击任务对应的“监控查询”进入连接器监控页面：</p> <ul><li>功能描述: 对单个连接器进行“暂停”、“恢复”、“重启”、“删除”的操作，可查看“连接器状态”及“监控日志”。</li></ul> <p><img src="69ac70884333c273dcab580385ee9bf7.png" alt=""></p> <ul><li>操作说明：
<ol><li>暂停：暂停“运行中”的连接器；</li></ol></li></ul> <p><img src="970a5eae5936fed6d95d800f16a1087b.png" alt=""></p> <ol><li>恢复：恢复“暂停”状态的连接器；</li></ol> <p><img src="9f1877fa0b4450af685988d3c5144e68.png" alt=""></p> <ol><li>重启：重新启动连接器；</li></ol> <p><img src="523aa174aa5997e4537bd9215f60b83b.png" alt=""></p> <ol><li>删除：删除连接器，删除连接器后可在任务页面进行任务“重启”、“刷新”操作后自动新建连接器；</li></ol> <p><img src="7fd6bbfd3f52914e81416739917a815d.png" alt=""></p> <ol><li>监控日志：下方可查看连接器的监控日志，可按日志类别筛选日志，点击“刷新”自动刷新最新日志，点击“下载”进行日志下载；</li></ol> <p><img src="37c63bf794a5f7193ac90f73c4c01dd5.png" alt=""></p> <h3 id="删除任务"><a href="#删除任务" class="header-anchor">#</a> 删除任务</h3> <ul><li>功能描述：删除现有任务。</li></ul> <p>在任务配置页面或“任务列表”页面选择任务，点击“删除”按钮，在弹出提示框点击“确认”即可删除任务。</p> <p>勾选“删除任务级联删除告警信息”可级联删除相关的告警信息；</p> <p>勾选“删除任务级联删除Topic”可级联删除任务运行产生的Kafka Topic（Connector运行所在Kafka集群上的Topic）。</p> <p><img src="449698dabafc4506602ce46da0874e4b.png" alt=""></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/help/3删除数据源.html" class="prev">
        删除数据源
      </a></span> <span class="next"><a href="/help/5告警.html">
        告警
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/help/assets/js/app.0f366fef.js" defer></script><script src="/help/assets/js/2.4c34d73e.js" defer></script><script src="/help/assets/js/13.c85e502e.js" defer></script>
  </body>
</html>
